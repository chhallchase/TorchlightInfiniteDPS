<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torchlight Infinite DPS Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Torchlight Infinite DPS Calculator</h1>
    
    <div class="calculator">
        <div class="section-title">Base Stats</div>
        <div class="input-section">
            <div class="input-group">
                <label for="baseDamage">Base Damage</label>
                <input type="number" id="baseDamage" placeholder="Base damage" value="100">
            </div>
            
            <div class="input-group">
                <label for="flatAddedDamage">Flat Added Damage</label>
                <input type="number" id="flatAddedDamage" placeholder="Flat added damage" value="0">
            </div>
            
            <div class="input-group">
                <label for="damageEffectiveness">Damage Effectiveness (%)</label>
                <input type="number" id="damageEffectiveness" placeholder="Effectiveness %" value="100">
            </div>
            
            <div class="input-group">
                <label for="attackSpeed">Attack Speed (per second)</label>
                <input type="number" id="attackSpeed" step="0.1" placeholder="Attack speed" value="1.5">
            </div>
        </div>
        
        <div class="section-title">Damage Multipliers</div>
        <div class="input-section">
            <div class="input-group">
                <label for="mainStat">Main Stat</label>
                <input type="number" id="mainStat" placeholder="Main stat" value="100">
            </div>
            
            <div class="input-group">
                <label for="damageIncrease">All % Damage Increase</label>
                <input type="number" id="damageIncrease" placeholder="% damage increase" value="0">
            </div>
            
            <div class="input-group">
                <label for="lifeMultiplier">Additional Damage to Life (%)</label>
                <input type="number" id="lifeMultiplier" placeholder="% to life" value="0">
            </div>
            
            <div class="input-group">
                <label for="doubleDamageChance">Double Damage Chance (%)</label>
                <input type="number" id="doubleDamageChance" min="0" max="100" placeholder="Double damage %" value="0">
            </div>
        </div>
        
        <div class="section-title">Penetration</div>
        <div class="input-section">
            <div class="input-group">
                <label for="spellPenetration">Spell Penetration (%)</label>
                <input type="number" id="spellPenetration" placeholder="Spell pen %" value="0">
            </div>
            
            <div class="input-group">
                <label for="armorPenetration">Armor Penetration (%)</label>
                <input type="number" id="armorPenetration" placeholder="Armor pen %" value="0">
            </div>
        </div>
        
        <div class="section-title">Critical Hit</div>
        <div class="input-section">
            <div class="input-group">
                <label for="critChance">Critical Hit Chance (%)</label>
                <input type="number" id="critChance" min="0" max="100" placeholder="Crit chance" value="15">
            </div>
            
            <div class="input-group">
                <label for="critMultiplier">Critical Damage Multiplier (%)</label>
                <input type="number" id="critMultiplier" min="100" placeholder="Crit multiplier" value="150">
            </div>
        </div>
        
        <div class="button-group">
            <button onclick="calculateDPS()">Calculate DPS</button>
            <button onclick="setReference()" id="setReferenceBtn">Set as Reference</button>
            <button onclick="cancelReference()" id="cancelReferenceBtn" style="display: none;">Cancel</button>
        </div>
        
        <div class="result">
            <h2>DPS:</h2>
            <span class="dps-value" id="dpsResult">0</span>
            
            <div id="dpsCompare" class="dps-compare" style="display: none;">
                <div class="compare-item">
                    <span class="compare-label">vs Reference:</span>
                    <span id="dpsChange" class="dps-change">+0 (0%)</span>
                </div>
                <div class="compare-item">
                    <span class="compare-label">Reference DPS:</span>
                    <span id="dpsReference" class="dps-reference">0</span>
                </div>
            </div>
        </div>
    </div>

    <script src="calculator.js"></script>
</body>
</html>